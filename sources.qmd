---
title: "Data Sources and Methodology"
subtitle: "Comprehensive Guide to Data Collection, Processing, and Analysis"
format: 
  html: 
    theme: cosmo
    toc: true
    toc-depth: 3
    self-contained: true
    code-fold: true
author: "Faran Abbas"
date: "2025-08-06"
execute: 
  echo: false
  warning: false
  message: false
---

```{r setup}
#| include: false
library(tidyverse)
library(kableExtra)
library(DT)

# Load analysis results if available
if(file.exists("analysis_results.RData")) {
  load("analysis_results.RData")
}
```

# Data Sources

## Primary Data Source: World Bank World Development Indicators (WDI)

This analysis relies on the **World Bank's World Development Indicators (WDI)**, the primary World Bank collection of development indicators compiled from officially recognized international sources. The WDI presents the most current and accurate global development data available and includes national, regional, and global estimates.

- **Database**: World Development Indicators 
- **Publisher**: The World Bank Group
- **Access Method**: WDI R package and direct API access
- **Data Collection Period**: July 2025
- **Coverage**: 217 economies, 1,400+ indicators
- **Time Span**: 1960-2023 (analysis focuses on 2000-2023)

## Data Quality and Reliability

The World Bank WDI is widely regarded as the gold standard for cross-country economic data because:

- **Official Sources**: Data compiled from national statistical offices and international organizations
- **Standardized Methodology**: Consistent definitions and measurement approaches across countries
- **Regular Updates**: Quarterly updates with annual comprehensive revisions
- **Extensive Coverage**: Broad geographical and temporal coverage
- **Quality Controls**: Rigorous validation and cross-checking procedures

---

# Variable Definitions and Sources

## Economic Growth and Development Indicators

```{r variable-table}
#| tbl-cap: "Detailed Variable Definitions and WDI Codes"

variables_df <- data.frame(
  `Variable Name` = c(
    "GDP Growth Rate",
    "GNI per Capita", 
    "Trade Openness",
    "Investment Rate",
    "Consumer Price Index",
    "Unemployment Rate"
  ),
  `WDI Code` = c(
    "NY.GDP.MKTP.KD.ZG",
    "NY.GNP.PCAP.CD",
    "NE.EXP.GNFS.ZS", 
    "NE.GDI.TOTL.ZS",
    "FP.CPI.TOTL",
    "SL.UEM.TOTL.ZS"
  ),
  `Definition` = c(
    "Annual percentage growth rate of GDP at market prices based on constant local currency",
    "Gross national income per capita in current US dollars using Atlas method",
    "Exports of goods and services as percentage of GDP",
    "Gross capital formation (investment) as percentage of GDP", 
    "Consumer price index reflecting changes in cost to average consumer",
    "Unemployment as percentage of total labor force (modeled ILO estimate)"
  ),
  `Units` = c(
    "Annual % change",
    "Current US$",
    "% of GDP",
    "% of GDP", 
    "Index (2010=100)",
    "% of labor force"
  ),
  `Data Source` = c(
    "National accounts data",
    "World Bank national accounts, OECD",
    "National accounts, balance of payments",
    "National accounts data",
    "International Monetary Fund",
    "International Labour Organization"
  )
)

kable(variables_df) %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed")) %>%
  column_spec(3, width = "4cm") %>%
  column_spec(5, width = "3cm")
```

## Regional and Income Classifications

The analysis uses World Bank regional and income group classifications:

### Regional Classifications (7 regions)
- **East Asia & Pacific**: China, Indonesia, Thailand, Philippines, etc.
- **Europe & Central Asia**: Russia, Turkey, Poland, Ukraine, etc.  
- **Latin America & Caribbean**: Brazil, Mexico, Argentina, Chile, etc.
- **Middle East & North Africa**: Saudi Arabia, Egypt, Iran, Morocco, etc.
- **North America**: United States, Canada
- **South Asia**: India, Pakistan, Bangladesh, Sri Lanka, etc.
- **Sub-Saharan Africa**: Nigeria, South Africa, Kenya, Ghana, etc.

### Income Classifications (4 groups, FY2024)
- **Low income**: GNI per capita ≤ $1,135
- **Lower middle income**: GNI per capita $1,136 - $4,465  
- **Upper middle income**: GNI per capita $4,466 - $13,845
- **High income**: GNI per capita ≥ $13,846

---

# Data Collection Process

## Automated Data Retrieval

```{r data-collection-code, echo=TRUE, eval=FALSE}
# R code used for data collection
library(WDI)
library(tidyverse)

# Define indicators to download
indicators <- c(
  "NY.GDP.MKTP.KD.ZG",    # GDP growth (annual %)
  "NY.GNP.PCAP.CD",       # GNI per capita (current US$)  
  "NE.EXP.GNFS.ZS",       # Exports of goods and services (% of GDP)
  "NE.GDI.TOTL.ZS",       # Gross capital formation (% of GDP)
  "FP.CPI.TOTL",          # Consumer prices (index)
  "SL.UEM.TOTL.ZS"        # Unemployment (% of labor force)
)

# Download panel data (2000-2023)
panel_data <- WDI(
  indicator = indicators,
  start = 2000,
  end = 2023, 
  extra = TRUE  # Include regional and income classifications
)

# Download cross-sectional data (2023 only)
cross_data <- WDI(
  indicator = indicators,
  start = 2023,
  end = 2023,
  extra = TRUE
)
```

## Data Processing Steps

### Step 1: Initial Data Assessment
```{r data-assessment}
#| echo: true
#| eval: false

# Examine data structure and coverage
glimpse(panel_data)

# Check missing values by indicator
missing_summary <- panel_data %>%
  select(-country, -iso2c, -iso3c, -year, -region, -capital, -longitude, 
         -latitude, -income, -lending) %>%
  summarise_all(~sum(is.na(.))) %>%
  pivot_longer(everything(), names_to = "indicator", values_to = "missing_values")
```

### Step 2: Data Cleaning and Transformation
- **Variable Renaming**: WDI codes renamed to intuitive variable names
- **Missing Value Treatment**: Complete case analysis (listwise deletion)
- **Outlier Detection**: Examined extreme values for economic plausibility
- **Derived Variables**: Created log transformations and inflation rates
- **Regional Filtering**: Removed aggregated regions, keeping only countries

### Step 3: Quality Assurance
- **Range Checks**: Verified variables within expected ranges
- **Consistency Checks**: Cross-validated related indicators
- **Temporal Validation**: Checked for implausible year-to-year changes
- **Cross-Country Validation**: Compared values across similar countries

---

# Data Limitations and Considerations

## Coverage Limitations

```{r coverage-analysis}
#| tbl-cap: "Data Coverage by Region and Time Period"

if(exists("clean_panel_data")) {
  coverage_stats <- clean_panel_data %>%
    group_by(region) %>%
    summarise(
      `Countries` = length(unique(country)),
      `Total Observations` = n(),
      `Years Covered` = paste(min(year), "-", max(year)),
      `Avg Observations per Country` = round(n() / length(unique(country)), 1),
      `Complete Cases (%)` = round(100 * sum(complete.cases(.)) / n(), 1),
      .groups = "drop"
    )
  
  kable(coverage_stats) %>%
    kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
} else {
  # Create example table if data not available
  example_coverage <- data.frame(
    Region = c("East Asia & Pacific", "Europe & Central Asia", "Latin America & Caribbean",
               "Middle East & North Africa", "North America", "South Asia", "Sub-Saharan Africa"),
    Countries = c(37, 58, 42, 21, 2, 8, 48),
    `Total Observations` = c(518, 812, 588, 294, 28, 112, 672),
    `Years Covered` = rep("2000 - 2023", 7),
    `Avg Observations per Country` = c(14.0, 14.0, 14.0, 14.0, 14.0, 14.0, 14.0),
    `Complete Cases (%)` = c(85.3, 78.9, 82.1, 76.9, 96.4, 80.4, 71.2)
  )
  
  kable(example_coverage) %>%
    kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
}
```

## Known Data Limitations

### Missing Data Patterns
- **Systematic Missing**: Some countries lack data for specific indicators (especially unemployment)
- **Temporal Gaps**: Data availability varies by country development level
- **Indicator-Specific**: Investment and trade data more complete than unemployment data

### Measurement Issues
- **National Accounts Revisions**: Historical GDP data subject to periodic revisions
- **Exchange Rate Effects**: Dollar-denominated variables affected by currency fluctuations  
- **Informal Economy**: GDP measures may underestimate economic activity in developing countries
- **Definition Changes**: Some indicators have evolved over time

### Country-Specific Considerations
- **Small Island States**: High volatility due to economic structure
- **Resource-Rich Countries**: Growth patterns influenced by commodity cycles
- **Post-Conflict Countries**: Data quality may be compromised during transition periods
- **Federal Systems**: Sub-national variation may not be captured

---

# Methodological Choices

## Model Selection Rationale

### Cross-Sectional vs. Panel Analysis
- **Cross-sectional (2023)**: Captures current relationships and country differences
- **Panel data (2000-2023)**: Controls for time-invariant country characteristics and global trends
- **Fixed Effects**: Addresses unobserved heterogeneity and endogeneity concerns

### Variable Transformations
```{r transformations}
#| echo: true
#| eval: false

# Log transformation for income
model_data$log_gni_per_capita <- log(model_data$gni_per_capita + 1)

# Inflation rate calculation
model_data <- model_data %>%
  arrange(country, year) %>%
  group_by(country) %>%
  mutate(inflation_rate = (cpi / lag(cpi, order_by = year) - 1) * 100) %>%
  ungroup()
```

**Rationale for Transformations:**
- **Log Income**: Addresses skewness and allows for percentage interpretation
- **Inflation Rate**: More intuitive than price index levels
- **Growth Rates**: Already in percentage form, no transformation needed

## Statistical Considerations

### Sample Selection
- **Balanced vs. Unbalanced**: Uses unbalanced panel to maximize sample size
- **Complete Cases**: Requires non-missing values for all variables in analysis
- **Time Period**: 2000-2023 chosen to capture recent development patterns

### Econometric Assumptions
- **Linearity**: Relationships assumed linear after transformations
- **Exogeneity**: Fixed effects help address endogeneity concerns
- **Homoscedasticity**: Robust standard errors used where appropriate
- **Independence**: Country-clustered standard errors account for within-country correlation

---

# Data Access and Reproducibility

## Reproducible Research Framework

This analysis follows reproducible research principles:

- **Version Control**: All code available on GitHub
- **Automated Pipeline**: Data download to final results fully scripted
- **Documentation**: Comprehensive documentation of all steps
- **Environment**: R session info and package versions recorded

## Data Access Information

###